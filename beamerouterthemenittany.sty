% Copyright 2007 by Till Tantau
% Copyright 2012,2015 by Vedran Mileti\'c, Joseph Wright
% Copyright 2023 by Joseph Wright, samcarter
% Copyright 2023 by David Northover
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file LICENSE.md for more details.

\mode<presentation>

\setbeamercolor{section in head/foot}{parent=palette primary}
\setbeamercolor{subsection in head/foot}{parent=palette tertiary}
\setbeamercolor{title in head}{parent=palette secondary}
\setbeamercolor{subtitle in body}{parent=palette secondary}

\setbeamercolor{author in foot}{parent=section in head/foot}
\setbeamercolor{title in foot}{parent=subsection in head/foot}
\setbeamercolor{page number in head/foot}{parent=subsection in head/foot}


\setbeamerfont{section in head/foot}{size=\small}
\setbeamerfont{title in head}{size=\large}
\setbeamerfont{subtitle in body}{size=\normalsize}


\usesectionheadtemplate
  {\hfill\insertsectionhead}
  {\hfill\color{fg!50!bg}\insertsectionhead}

                                % Head

\defbeamertemplate*{headline}{nittany}
{%
  \leavevmode%
  \hbox%
  {%
  \usebeamerfont{section in head/foot}%
  \begin{beamercolorbox}[wd=.33\paperwidth,ht=6ex,dp=1.125ex,right,rightskip=.2cm plus1fil]{section in head/foot}%
    \insertsection%
  \end{beamercolorbox}%
  \usebeamerfont{title in head}%
  \begin{beamercolorbox}[wd=.67\paperwidth,ht=5.04ex,dp=0.0ex,left,leftskip=.3cm]{title in head}%
    \insertframetitle%
  \end{beamercolorbox}%
  }%
}

\defbeamertemplate*{frametitle}{nittany}
{
    \usebeamerfont{subtitle in body}%
    \vspace{8ex}%
    \insertframesubtitle%
}

\defbeamertemplate*{footline}{nittany}
{%
  \leavevmode%
  \hbox%
  {%
  \begin{beamercolorbox}[wd=.35\paperwidth,ht=2.5ex,dp=1.125ex,right,rightskip=.3cm plus1fil]{author in head/foot}%
    \usebeamerfont{author in head/foot}\insertshortauthor%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.65\paperwidth,ht=2.5ex,dp=1.125ex,left,leftskip=.3cm]{title in foot}%
    \usebeamerfont{title in foot}\insertshorttitle\nobreak\hfill\insertframenumber%
  \end{beamercolorbox}%
  }%
  \vskip0pt%
}

% Custom Title Page has no Header
\defbeamertemplate*{headline}{nittanytitle}{}

% Custom Title Page has a funky footer
\defbeamertemplate*{footline}{nittanytitle}
{%
    \leavevmode%
    \hbox%
    {%
        \usebeamerfont{palette primary}%
        \usebeamercolor{palette primary}%
        \begin{tikzpicture}[path image/.style={%
            path picture={%
            \node at (path picture bounding box.center) {%
            \includegraphics[height=1cm]{##1}%
            };}}]%
        \draw [fill=bg, draw=bg, thin]
            (0.0, 1) -- (0.6, 1) -- (0.1, 0) -- (0.0, 0);
        \draw [fill=bg, draw=bg, thin]
            (0.7, 1) -- (5.4, 1) -- (4.9, 0) -- (0.2, 0);
        \draw [path image=\the\institutionlogo,draw=bg,thin]
            (5.5, 1) -- (9.0, 1) -- (8.5, 0) -- (5.0, 0);
        \draw [path image=\the\locationlogo,draw=bg,thin]
            (9.1, 1) -- (12.6, 1) -- (12.1, 0) -- (8.6, 0);
        \draw [fill=bg, draw=bg,thin]
            (12.7, 1) -- (12.8, 1) -- (12.8, 0) -- (12.2, 0);
        \node[text width=4cm, color=fg] at (2.8, 0.5) {\insertinstitute\par};
        \end{tikzpicture}
    }%
    \vskip0pt%
}

\defbeamertemplate*{navigation symbols}{nittanytitle}{}

\defbeamertemplate*{title page}{nittany}
{
  \usebeamerfont{title}\inserttitle\par
  \bigskip
  \bigskip
  \usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par
  \bigskip
  \bigskip
  \usebeamerfont{author}\insertauthor\par
  \bigskip
  \bigskip
  \usebeamerfont{institute}\insertinstitute\par
  \bigskip
  \usebeamerfont{date}\insertdate\par
  \usebeamercolor[fg]{titlegraphic}\inserttitlegraphic
}

\defbeamertemplate*{title page}{nittanytitle}
{%
    \begin{columns}%
    \begin{column}{\paperwidth}%

    \hbox%
    {%
        \usebeamerfont{palette primary}%
        \usebeamercolor{palette primary}%
        \begin{tikzpicture}[path image/.style={%
            path picture={%
            \node at (path picture bounding box.center) {%
            \includegraphics[height=7.2cm]{##1}%
            };}}]%
        \draw [fill=bg, draw=bg, thin]
            (0.0, 6.7) -- (11.75, 6.7) -- (8.15, 0) -- (0.0, 0);
        \draw [fill=bg, draw=bg, thin]
            (11.85, 6.7) -- (\paperwidth, 6.7) -- (\paperwidth, 0) -- (8.25, 0);
        \node[text width=10cm, color=fg] at (5.5, 4.1) {\huge\inserttitle\par};
        \node[text width=7cm, color=fg] at (5.5, 1.1) {%
            \Large\insertsubtitle\par%
        };
        \end{tikzpicture}
    }%
    \vskip2.5pt
    \hbox%
    {%
        \usebeamerfont{palette tertiary}%
        \usebeamercolor{palette tertiary}%
        \begin{tikzpicture}[path image/.style={%
            path picture={%
            \node at (path picture bounding box.center) {%
            \includegraphics[height=1.5cm]{##1}%
            };}}]%
        \draw [fill=bg, draw=bg, thin]
            (0.0, 1.5) -- (1.45, 1.5) -- (0.7, 0) -- (0.0, 0);
        \draw [fill=bg, draw=bg, thin]
            (1.55, 1.5) -- (8.05, 1.5) -- (7.3, 0) -- (0.8, 0);
        \draw [path image=\the\lablogo, fill=bg, draw=bg, thin]
            (8.15, 1.5) -- (12.8, 1.5) -- (12.8, 0.2) -- (12.7, 0) -- (7.4, 0);
        \node[text width=6cm, color=fg] at (4.8, 0.75) {\huge\insertauthor};
        \end{tikzpicture}
    }%
    \vskip0pt plus -1fill% Bottom align
    \end{column}%
    \end{columns}%
}

\mode
<all>